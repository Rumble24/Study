# 获取ipa文件
使用 爱思助手 点击可以直接获取


# Mac 命令
touch 文件名   创建文件命令
sudo chmod 777 Clutch  :zsh: permission denied: Clutch

在使用zsh终端时，如果你遇到了’command not found: pip’的错误信息，这通常意味着你的系统中尚未安装pip。pip是Python的包管理器，用于安装和管理Python软件包。解决这个问题的方法是下载和安装pip。
brew install python3-pip

# otool - 分析mach-o 文件的命令
命令行直接输入 otool 可以查看所有支持的命令

### 判断是否砸坑
otool -l Aweme | grep -A 4 "LC_ENCRYPTION_INFO"
          cmd LC_ENCRYPTION_INFO_64
      cmdsize 24
     cryptoff 16384
    cryptsize 16384
      cryptid 1
未砸壳（加密）：输出中包含 cryptid 1 或 cryptid 2
已砸壳（解密）：输出中 cryptid 0，或无 LC_ENCRYPTION_INFO 段

### otool -h 是 macOS 系统中 otool（object file display tool）命令的一个常用选项，用于显示 Mach-O 二进制文件的头部信息（header）
### -l print the load commands 输出  load commands
### -L print shared libraries used # 列出二进制依赖的所有动态库（包括系统库和自定义库）

# lipo - 处理多架构二进制文件（FAT 文件） 的命令行工具，
主要功能包括查看、提取、合并不同 CPU 架构的二进制数据，常用于 iOS/macOS 开发和逆向工程中处理支持多设备的二进制文件。

lipo -info <文件路径>       # 显示文件包含的所有架构
lipo -archs <文件路径>      # 仅列出架构名称（更简洁）
lipo <源文件> -thin <架构名> -output <输出文件> # 从多架构文件中提取单个架构 - ：从 FAT 二进制中提取指定架构（如 arm64），生成仅包含该架构的 “瘦二进制”。
lipo -create <文件1> <文件2> ... -output <输出文件> #合并多个单架构文件为多架构文件
lipo -remove <架构名> <源文件> -output <输出文件>  # 从多架构文件中移除指定架构
lipo -replace <旧架构> <新文件> <源文件> -output <输出文件>  # 替换架构


# Mach-View 可以查看mach文件
下载：https://github.com/gdbinit/MachOView/releases/tag/v3.0.0



# Class-dump 可以获取到app的头文件
https://book.crifan.org/books/ios_re_export_header/website/objc/class_dump/versions/lechium.html

下载获取到 classdumpc 可以拖入 /user/local/bin 下面使用
但是 官网下载的 class-dump 由于很久没有维护了，不支持 Swift 和 OC 混编的二进制文件，会报如下错误
所以推荐从 github.com/AloneMonkey… 下载 class-dump

Github:https://github.com/lechium/classdumpios

如果创建的时候用的是Swift那么不能使用 classdumpc
如果创建的时候选择的是OC 那么就可以 反汇编出头文件
classdumpc -H ../ipa/YouTube_17.08.2_dumped/Payload/YouTube.app/YouTube -o headers


# 越狱 palera1n
https://github.com/palera1n/palera1n


# 脱壳工具 
https://crifan.github.io/ios_re_crack_shell_ipa/website/

### Clutch -d com.taobao.taobao4iphone 
使用报错 zsh: killed Clutch

### IOS应用砸壳之frida-ios-dump
https://book.crifan.org/books/ios_re_crack_shell_ipa/website/crack_tools/frida_ios_dump.html
IPA 中的二进制文件（Mach-O）通常经过 Apple 加密，解密密钥存储在设备 / 模拟器的安全区域，仅在应用运行时加载。因此必须通过运行中的进程（模拟器中）才能获取解密后的二进制。
所以我们现在的目标改为 砸壳 M2 电脑上的微信应用
sudo ./dump_macos.py "WeChat" -o ./decrypted_WeChat.app
pip3 install psutil --user --break-system-packages

直接用 --user 安装（同时需绕过外部管理限制）
pip3 install frida --user --break-system-packages
pip3 install -r requirements.txt --user --break-system-packages
./dump.py /Users/meta/Documents/微信ipa/抖音_35.3.0_1/Payload/Aweme.app 

### https://github.com/paradiseduo/appdecrypt
sudo ./appdecrypt /Users/meta/Documents/微信ipa/抖音_35.3.0_1/Payload/Aweme.app /Users/meta/Documents/微信ipa/抖音_35.3.0_1/Payload/Aweme-test.app
报错；Dump /Users/meta/Documents/微信ipa/抖音_35.3.0_1/Payload/Aweme.app/PlugIns/AWEVideoWidget.appex/AWEVideoWidget fail, because of mmap fail with Operation not permitted
github 报错地址：https://github.com/paradiseduo/appdecrypt/issues/34 无人解决
