# TCP 长连接和 WebSocket 有以下区别：

协议层级：
TCP 长连接：位于传输层，是 TCP 协议本身提供的一种连接特性，主要通过在一定时间内保持 TCP 连接不被关闭来实现多次数据传输。
WebSocket：是基于 TCP 的应用层协议，借助 HTTP 协议进行握手，然后将连接升级为 WebSocket 连接，在单个 TCP 连接上实现全双工通信。
连接建立方式：
TCP 长连接：通过 TCP 三次握手直接建立连接。在应用层如 HTTP 协议中，通过设置 Connection: keep - alive 等相关字段来告知对方使用长连接。
WebSocket：先进行 HTTP 握手，客户端发送包含特殊请求头的 HTTP 请求，服务器返回 101 Switching Protocols 状态码表示同意升级协议，然后切换到 WebSocket 协议进行通信。
通信模式：
TCP 长连接：虽然是双向通信，但在应用层如果是类似 HTTP 协议，通常是客户端发起请求，服务器响应请求，服务器一般不会主动向客户端推送数据，除非在应用层实现了特定的推送机制。
WebSocket：支持全双工通信，客户端和服务器可以同时主动发送数据，双方都能在任意时刻向对方发送消息，更适合实时交互场景。
数据格式：
TCP 长连接：传输的是原始字节流，应用层需要自己定义数据格式和解析方式，来区分不同的消息和数据边界。
WebSocket：自带消息分帧机制，数据帧头部较小，在不包含扩展的情况下，服务器到客户端的头部大小为 2 至 10 字节，客户端到服务器还需加上 4 字节掩码，适合高频小数据传输，且能自动处理消息的分割和组装。
适用场景：
TCP 长连接：适用于高效传输大块数据的场景，如视频流、文件下载等，也适用于客户端和服务器有一定交互，但不要求服务器实时主动推送数据的场景。
WebSocket：专为实时互动场景设计，如在线游戏、实时聊天、直播间弹幕、协作工具中的多人同时编辑等，能更好地节省服务器资源和带宽，实现更实时的通讯。
实现复杂度：
TCP 长连接：在应用层实现时，如果需要服务器主动推送等功能，需要在应用层协议中自行设计和实现复杂的逻辑，包括连接管理、消息推送策略等。
WebSocket：相对来说，在实现实时双向通信功能时，由于协议本身提供了相关机制，实现复杂度相对较低，开发者可以更专注于业务逻辑的实现。
